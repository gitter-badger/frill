<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">src/core/__test__/action_test.js | FrillJS API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
</head>
<body class="layout-container">

<header>
  <a href="./">Home</a>
  <a href="identifiers.html">Identifier</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/nanopx/frill" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div data-ice="classWrap">
  <h2>Class</h2>
  <ul>
    
  <li data-ice="classDoc"><span><a href="class/src/core/Action.js~Action.html">Action</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/core/Context.js~Context.html">Context</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/core/Dispatcher.js~Dispatcher.html">Dispatcher</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/core/Store.js~Store.html">Store</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/actions/Test.js~TestAction.html">TestAction</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/stores/Test.js~TestStore.html">TestStore</a></span></li>
</ul>
</div>





<div data-ice="variableWrap">
  <h2><a href="variable/">Variable</a></h2>
  <ul>
    
  <li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-action">action</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-apiPlugin">apiPlugin</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-context">context</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-store">store</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-testAction">testAction</a></span></li>
<li data-ice="variableDoc"><span><a href="variable/index.html#static-variable-testStore">testStore</a></span></li>
</ul>
</div>




</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/core/__test__/action_test.js</h1>
<pre class="source-code line-number"><code class="prettyprint linenums" data-ice="content">import &apos;../../../__test__/spec_helper.js&apos;;
import Action from &apos;../Action&apos;;

const services = [
  &apos;socket&apos;,
  &apos;request&apos;,
];

const reservedNamespaces = [
  &apos;setup&apos;,
];

const testServiceOptions = {
  key: &apos;value&apos;,
};

describe(&apos;#src/core/Action&apos;, () =&gt; {
  describe(&apos;class Action&apos;, () =&gt; {
    it(&apos;should execute setup() at construction if exists&apos;, () =&gt; {
      class testActionClass extends Action {
        constructor() {
          super();
        }
        setup() {
          this.isStartedSetup = true;
        }
      }

      const TestActionClass = new testActionClass();

      expect(TestActionClass.isStartedSetup).to.exist;
      expect(TestActionClass.isStartedSetup).to.equal(true);
    });
    it(&apos;should execute setup() at construction if exists B&apos;, () =&gt; {
      class testActionClass extends Action {
        constructor() {
          super();
        }
        setup() {
          this.isStartedSetup = true;
        }
      }

      const TestActionClass = new testActionClass();

      expect(TestActionClass.isStartedSetup).to.exist;
      expect(TestActionClass.isStartedSetup).to.equal(true);
    });
  });
  // describe(&apos;Action.addService&apos;, () =&gt; {});

});

//
//     it &quot;should be accecible&quot;, -&gt;
//       expect(Action.addService).to.be.a(&apos;function&apos;)
//
//     it &quot;should be able to add a custom service&quot;, -&gt;
//       Action.addService &quot;newService&quot;, (opts) -&gt;
//         return opts
//       expect(Action.prototype._services.newService).to.be.a(&quot;function&quot;)
//
//     it &quot;should be able to access options from service&quot;, -&gt;
//
//       expect(Action.prototype._services.newService(testServiceOptions)).to.equal(testServiceOptions)
//
//       # remove the new service (for other tests to work)
//       delete Action.prototype._services.newService
//
//     it &quot;should not be able to add existing namespace&quot;, -&gt;
//       services.forEach (service) -&gt;
//         expect -&gt;
//           Action.addService service, -&gt;
//             return
//         .to.throw(&quot;Service: #{service} already exists.&quot;)
//
//     it &quot;should not be able to add a non-function service&quot;, -&gt;
//       expect -&gt;
//         Action.addService &quot;test-service&quot;, &quot;aString&quot;
//       .to.throw(&quot;A service must be a function.&quot;)
//
//     it &quot;should not be able to add a service when the namespace is reserved&quot;, -&gt;
//       reservedNamespaces.forEach (reserved) -&gt;
//         expect -&gt;
//           Action.addService reserved, ()-&gt;
//             return
//         .to.throw(&quot;Could not add service. &apos;#{reserved}&apos; is a reserved namespace.&quot;)
//
//   describe &apos;Action.use&apos;, -&gt;
//
//     it &quot;should be accecible&quot;, -&gt;
//       expect(Action.use).to.be.a(&apos;function&apos;)
//
//     it &quot;should contain a list of integrated services&quot;, -&gt;
//       expect(Action.prototype._services).to.have.all.keys(services)
//
//     it &quot;should not be able to use a service which does not exist&quot;, -&gt;
//       expect -&gt;
//         Action.use(&quot;serviceNotExisting&quot;)
//       .to.throw(&quot;The specified service doesn\&apos;t exist.&quot;)
//
//     it &quot;should not be able to use the &apos;request&apos; service before using the &apos;use&apos; method&quot;, -&gt;
//       expect(Action.prototype.request).to.be.a(&apos;undefined&apos;)
//
//     it &quot;should not be able to use the &apos;socket&apos; service before using the &apos;use&apos; method&quot;, -&gt;
//       expect(Action.prototype.socket).to.be.a(&apos;undefined&apos;)
//
//     it &quot;should be able to use the &apos;request&apos; service&quot;, -&gt;
//       Action.use(&quot;request&quot;, null)
//       expect(Action.prototype.request).to.be.a(&apos;function&apos;)
//
//     it &quot;should be able to use the &apos;socket&apos; service&quot;, -&gt;
//       Action.use(&quot;socket&quot;, {url: &quot;localhost&quot;})
//       expect(Action.prototype.socket).to.be.a(&apos;object&apos;)
//
//     it &quot;should not be able to start a service twice&quot;, -&gt;
//       expect -&gt;
//         Action.use(&quot;request&quot;, null)
//       .to.throw(&quot;The specified service name already exists and started. Please provide a different namespace.&quot;)
</code></pre>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.2.0)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
